<%= stylesheet_link_tag "passwords", media: "all" %>

<div class="form-container">
    <h2>Enter Reset Code</h2>

    <%= form_with url: verify_reset_code_path, method: :post do |f| %>
        <label for="reset_code">Reset Code:</label>
        <%= f.text_field :reset_code, id: "reset_code", required: true %>

        <%= f.submit "Verify", class: "btn" %>
    <% end %>

    <p id="resend_text">Didn't receive the code? Wait <span id="timer">30</span> seconds.</p>

    <%= link_to "Resend Code", resend_reset_code_path, id: "resend_button", class: "btn", disabled: true %>
</div>

<script>
    let countdown = 30;
    let timer = document.getElementById("timer");
    let resendButton = document.getElementById("resend_button");

    function updateTimer() {
        countdown--;
        timer.textContent = countdown;
        if (countdown === 0) {
            resendButton.removeAttribute("disabled");
        } else {
            setTimeout(updateTimer, 1000);
        }
    }
    setTimeout(updateTimer, 1000);
</script>
